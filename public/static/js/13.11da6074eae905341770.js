webpackJsonp([13],{494:function(e,t,a){a(645);var o=a(181)(a(551),a(691),"data-v-773907f5",null);e.exports=o.exports},509:function(e,t,a){e.exports={default:a(512),__esModule:!0}},510:function(e,t){t.f={}.propertyIsEnumerable},511:function(e,t){t.f=Object.getOwnPropertySymbols},512:function(e,t,a){a(514),e.exports=a(47).Object.assign},513:function(e,t,a){"use strict";var o=a(184),i=a(511),r=a(510),n=a(185),s=a(186),l=Object.assign;e.exports=!l||a(124)(function(){var e={},t={},a=Symbol(),o="abcdefghijklmnopqrst";return e[a]=7,o.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=o})?function(e,t){for(var a=n(e),l=arguments.length,d=1,c=i.f,u=r.f;l>d;)for(var m,p=s(arguments[d++]),f=c?o(p).concat(c(p)):o(p),g=f.length,h=0;g>h;)u.call(p,m=f[h++])&&(a[m]=p[m]);return a}:l},514:function(e,t,a){var o=a(79);o(o.S+o.F,"Object",{assign:a(513)})},515:function(e,t,a){"use strict";t.__esModule=!0;var o=a(509),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}},516:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(509),i=a.n(o),r=(a(183),a(182));t.default={data:function(){return{searchContent:{},total:"",pageNow:1,rows:10}},created:function(){this.initData({page:1,rows:10}),this.searchContent=i()({},this.searchData)},watch:{searchData:{handler:function(e,t){this.searchContent=i()({},this.searchData),this.searchContent.rows=this.rows,1==this.pageNow?this.initData(this.searchContent):this.pageNow=1},deep:!0},reload:function(){1==this.pageNow?this.initData(this.searchContent):this.pageNow=1}},methods:{initData:function(e){var t=this;a.i(r.c)(this,e,this.url,function(e){e.data.message?(t.total=0,t.$emit("tableContent",[])):(t.total=e.data.total,t.$emit("tableContent",e.data.rows))})},handleSizeChange:function(e){this.searchContent.rows=e,this.rows=e,this.initData(this.searchContent)},handleCurrentChange:function(e){this.searchContent.page=e,this.initData(this.searchContent)}},props:["searchData","url","reload"]}},517:function(e,t,a){t=e.exports=a(480)(!1),t.push([e.i,"",""])},518:function(e,t,a){var o=a(517);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(481)("6f170d66",o,!0)},519:function(e,t,a){a(518);var o=a(181)(a(516),a(520),"data-v-d3b730f0",null);e.exports=o.exports},520:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{ref:"pagination",attrs:{total:parseInt(e.total),layout:"total, sizes, prev, pager, next, jumper","current-page":e.pageNow},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNow=t}}})},staticRenderFns:[]}},551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(515),i=a.n(o),r=a(182),n=a(183),s=a(519),l=a.n(s);t.default={data:function(){return{url:"/aas/admin/user/queryByPage.do",tableData:[],buttonData:[],popedomsArr:[],tableHeight:"",reload:!1,userName:"",searchData:{page:1,rows:10,userName:""},addVisiable:!1,addLoading:!1,addForm:{adduserName:"",adduserNickName:"",addremark:"",addorgId:""},addBranchList:[],editVisiable:!1,editLoading:!1,editForm:{edituserName:"",edituserNickName:"",editremark:"",editorgId:"",edituserId:""},rules:{adduserName:[{required:!0,trigger:"blur",message:"请输入登录名"},{max:64,message:"输入字符长度不超过64个",trigger:"blur"},{validator:function(e,t,a){0==/^\S*$/.test(t)?a(new Error("不能包含空格")):a()},trigger:"blur"}],adduserNickName:[{required:!0,trigger:"blur",message:"请输入用户昵称"},{max:64,message:"输入字符长度不超过64个",trigger:"blur"},{validator:function(e,t,a){0==/^\S*$/.test(t)?a(new Error("不能包含空格")):a()},trigger:"blur"}],addorgId:[{type:"number",required:!0,trigger:"change",message:"请选择所属机构"}],addremark:[{max:256,message:"输入字符长度不超过256个",trigger:"blur"}],edituserNickName:[{required:!0,trigger:"blur",message:"请输入用户昵称"},{max:64,message:"输入字符长度不超过64个",trigger:"blur"},{validator:function(e,t,a){0==/^\S*$/.test(t)?a(new Error("不能包含空格")):a()},trigger:"blur"}],editremark:[{max:256,message:"输入字符长度不超过256个",trigger:"blur"}]},roleVisible:!1,roleLoading:!1,rowData:"",role:"",roleList:[]}},created:function(){var e=this;this.tableHeight=document.documentElement.clientHeight-195,window.onresize=function(){e.tableHeight=document.documentElement.clientHeight-195},a.i(r.a)(this,{},"/aas/admin/organ/findAllOpened.do",function(t){t.data&&(e.addBranchList=t.data)});var t="";if(window.localStorage){t=window.localStorage.getItem("popedoms")}else t=localStorage.getItem("popedoms");if(this.buttonData=[],t)for(var o=JSON.parse(t),i=o.length,n=0;n<i;n++)3==o[n].popedomButton&&this.buttonData.push(o[n])},computed:i()({},a.i(n.b)(["popedomList"])),methods:i()({},a.i(n.c)(["getPopedom"]),{tableContent:function(e){this.tableData=e||[]},statusChange:function(e){return"3"==e.opStatus?"密码锁定":"0"==e.opStatus?"启用":"错误编码"},search:function(){for(var e in this.searchData)"page"==e&&"rows"==e||(this.searchData[e]=this[e]);this.searchData.page=1,this.searchData.rows=10},reset:function(){this.userName=""},buttonClick:function(e,t,a){var o=this;switch(e){case"openAddDialog()":o.openAddDialog();break;case"openEditDialog()":o.openEditDialog();break;case"openLogoffDialog()":o.openLogoffDialog(a);break;case"openStartDialog()":o.openStartDialog(a);break;case"openStopDialog()":o.openStopDialog(a);break;case"openAppConfigDialog()":o.openAppConfigDialog();break;case"openResetDialog()":o.openResetDialog();break;case"openUnlockDialog()":o.openUnlockDialog()}},openAddDialog:function(){this.$refs.addForm&&this.$refs.addForm.resetFields(),this.addLoading=!1,this.addVisiable=!0},checkUserName:function(){var e=this;this.$refs.addForm.validate(function(t){t&&(e.addLoading=!0,a.i(r.b)(e,{userName:e.addForm.adduserName},"/aas/admin/user/checkUserName.do",function(t){t.data.type?e.addOperator():(e.addLoading=!1,e.$message({message:"用户名已存在，请重新输入",type:"warning"}),e.$refs.addInput.$el.firstElementChild.select())},!0))})},addOperator:function(){var e=this;this.$refs.addForm.validate(function(t){if(!t)return!1;e.addLoading=!0;var o={};for(var i in e.addForm)o[i.substring(3)]=e.addForm[i];a.i(r.b)(e,o,"/aas/admin/user/insert.do",function(t){t.data&&t.data.type&&(e.addVisiable=!1,e.$message({message:"添加成功",type:"success"}),e.reload=!e.reload),e.addLoading=!1})})},openEditDialog:function(){if(this.isSelect()&&!this.isCancel("该用户已注销，不能编辑")){for(var e in this.editForm)this.editForm[e]=this.rowData[e.substring(4)];this.editLoading=!1,this.editVisiable=!0}},editOperator:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;e.editLoading=!0;var o={userId:e.editForm.edituserId,userNickName:e.editForm.edituserNickName,orgId:e.editForm.editorgId,remark:e.editForm.editremark};a.i(r.b)(e,o,"/aas/admin/user/updateById.do",function(t){t.data&&t.data.type&&(e.editVisiable=!1,e.$message({message:"修改成功",type:"success"}),e.reload=!e.reload),e.editLoading=!1})})},openLogoffDialog:function(e){var t=this;"3"==e.userStatus?this.$notify({title:"消息",message:"该用户已注销",type:"warning"}):"1"==e.userStatus?this.$notify({title:"消息",message:"请先停用用户",type:"warning"}):this.$confirm("确定注销此用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.b)(t,{userId:e.userId},"/aas/admin/user/logoff.do",function(e){e.data&&e.data.type&&(t.$message({message:"注销成功",type:"success"}),t.reload=!t.reload)})}).catch(function(){})},openStopDialog:function(e){var t=this;"3"==e.userStatus?this.$notify({title:"消息",message:"该用户已注销",type:"warning"}):"2"==e.userStatus?this.$notify({title:"消息",message:"用户已停用",type:"warning"}):this.$confirm("确定停用此用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.b)(t,{userId:e.userId},"/aas/admin/user/stop.do",function(e){e.data&&e.data.type&&(t.$message({message:"停用成功",type:"success"}),t.reload=!t.reload)})}).catch(function(){})},openStartDialog:function(e){var t=this;"3"==e.userStatus?this.$notify({title:"消息",message:"该用户已注销，无法启用",type:"warning"}):"1"==e.userStatus?this.$notify({title:"消息",message:"用户已启用",type:"warning"}):this.$confirm("确定启用该用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.b)(t,{userId:e.userId},"/aas/admin/user/start.do",function(e){e.data&&e.data.type&&(t.$message({message:"启用成功",type:"success"}),t.reload=!t.reload)})}).catch(function(){})},openResetDialog:function(){if(this.isSelect()&&!this.isCancel("该用户已注销，不能重置密码"))return"2"==this.rowData.userStatus?void this.$notify({title:"消息",message:"请先启用用户",type:"warning"}):void this.confirm("确定重置此用户密码？","/aas/admin/user/resetUserPassword.do","重置成功")},openUnlockDialog:function(){this.isSelect()&&!this.isCancel("用户已注销，不能解锁")&&this.confirm("确定解锁此用户？","/aas/admin/user/unlockUser.do","解锁成功")},openAppConfigDialog:function(){var e=this;this.isSelect()&&!this.isCancel("该用户已注销，不能分配角色")&&(this.roleVisible=!0,this.roleLoading=!1,a.i(r.a)(this,{userId:this.rowData.userId},"/aas/admin/role/queryAllRoleByUserId.do",function(t){if(t.data){e.roleList=t.data.rows;for(var a=0;a<e.roleList.length;a++)if(e.roleList[a].owned)return void(e.role=e.roleList[a].roleId);e.role=""}}))},submitRole:function(){var e=this;this.roleLoading=!0;var t={userId:this.rowData.userId,roleIds:this.role};a.i(r.b)(this,t,"/aas/admin/role/distrRoleToUser.do",function(t){t.data&&t.data.type&&(e.roleVisible=!1,e.$message({message:"分配成功",type:"success"}),e.reload=!e.reload),e.roleLoading=!1})},confirm:function(e,t,o){var i=this;this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(r.b)(i,{userId:i.rowData.userId},t,function(e){e.data&&e.data.type&&(i.$message({message:o,type:"success"}),i.reload=!i.reload)})}).catch(function(){})},select:function(e){this.rowData=e},isSelect:function(){return!!this.rowData||(this.$notify.info({title:"消息",message:"请选择一条记录"}),!1)},isCancel:function(e){return"3"==this.rowData.userStatus&&(this.$notify.warning({title:"消息",message:e}),!0)}}),components:{pagerows:l.a}}},616:function(e,t,a){t=e.exports=a(480)(!1),t.push([e.i,".operatorPage[data-v-773907f5]{height:100%}.handle[data-v-773907f5]{margin-bottom:2px}.iconfont[data-v-773907f5]{font-size:16px;margin-right:4px}.el-tree-node__expand-icon[data-v-773907f5]{border-left-width:10px}.el-radio-group .el-radio[data-v-773907f5]{margin-left:15px}.demo-table-expand[data-v-773907f5]{font-size:0}.demo-table-expand label[data-v-773907f5]{width:90px;color:#99a9bf}.demo-table-expand .el-form-item[data-v-773907f5]{margin-right:0;margin-bottom:0;width:100%;overflow:hidden}.itemValue[data-v-773907f5]{color:#1d8ce0;font-size:15px;word-break:break-all;white-space:pre}",""])},645:function(e,t,a){var o=a(616);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(481)("3a141668",o,!0)},691:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operatorPage page"},[a("section",{staticClass:"handle"},[e._l(e.buttonData,function(t,o){return e.buttonData.length?[101033!=t.popedomId&&101034!=t.popedomId&&101036!=t.popedomId?a("el-button",{key:o,attrs:{size:"small",type:"primary"},on:{click:function(a){e.buttonClick(t.buttonLink)}}},[a("i",{staticClass:"iconfont",class:t.iconLink}),e._v(e._s(t.popedomName))]):e._e()]:e._e()})],2),e._v(" "),a("section",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"登录名"}},[a("el-input",{attrs:{size:"small",placeholder:"输入登录名"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.search()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",icon:"search",type:"primary"},on:{click:function(t){e.search()}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"circle-close",type:"primary"},on:{click:function(t){e.reset()}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:e.tableHeight,border:"",stripe:"",data:e.tableData},on:{"current-change":e.select}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"错误次数:"}},[a("span",{staticClass:"itemValue"},[e._v(e._s(t.row.errorNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间:"}},[a("span",{staticClass:"itemValue"},[e._v(e._s(t.row.formatUserCreatedDatetime))])]),e._v(" "),a("el-form-item",{staticClass:"itemLabel",attrs:{label:"备注:"}},[a("span",{staticClass:"itemValue"},[e._v(e._s(t.row.remark))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"用户名",prop:"userName","min-width":"170"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"用户昵称",prop:"userNickName","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"用户状态",prop:"userStatusName","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"机构名称",prop:"orgName","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"操作","min-width":"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.buttonData,function(o,i){return 101033==o.popedomId?a("el-button",{key:i,attrs:{type:"warning",size:"small"},on:{click:function(a){a.stopPropagation(),e.buttonClick(o.buttonLink,t.$index,t.row)}}},[e._v(e._s(o.popedomName))]):e._e()}),e._v(" "),e._l(e.buttonData,function(o,i){return 101034==o.popedomId?a("el-button",{key:i,attrs:{type:"info",size:"small"},on:{click:function(a){a.stopPropagation(),e.buttonClick(o.buttonLink,t.$index,t.row)}}},[e._v(e._s(o.popedomName))]):e._e()}),e._v(" "),e._l(e.buttonData,function(o,i){return 101036==o.popedomId?a("el-button",{key:i,attrs:{type:"danger",size:"small"},on:{click:function(a){a.stopPropagation(),e.buttonClick(o.buttonLink,t.$index,t.row)}}},[e._v(e._s(o.popedomName))]):e._e()})]}}])})],1),e._v(" "),a("pagerows",{attrs:{searchData:e.searchData,url:e.url,reload:e.reload},on:{tableContent:e.tableContent}}),e._v(" "),a("el-dialog",{attrs:{size:"tiny",title:"添加用户",visible:e.addVisiable,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addVisiable=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"adduserName",label:"登录名"}},[a("el-input",{ref:"addInput",attrs:{"auto-complete":"off"},model:{value:e.addForm.adduserName,callback:function(t){e.addForm.adduserName=t},expression:"addForm.adduserName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"adduserNickName",label:"用户昵称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.adduserNickName,callback:function(t){e.addForm.adduserNickName=t},expression:"addForm.adduserNickName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"addorgId",label:"所属机构"}},[a("el-select",{model:{value:e.addForm.addorgId,callback:function(t){e.addForm.addorgId=t},expression:"addForm.addorgId"}},e._l(e.addBranchList,function(e,t){return a("el-option",{key:t,attrs:{label:e.orgName,value:e.orgId}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"addremark",label:"描述"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.addForm.addremark,callback:function(t){e.addForm.addremark=t},expression:"addForm.addremark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:function(t){e.checkUserName()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.addVisiable=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{size:"tiny",title:"编辑用户",visible:e.editVisiable,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editVisiable=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"edituserId",label:"用户Id"}},[a("el-input",{attrs:{disabled:"","auto-complete":"off",readonly:!0},model:{value:e.editForm.edituserId,callback:function(t){e.editForm.edituserId=t},expression:"editForm.edituserId"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"edituserName",label:"登录名"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:"",readonly:!0},model:{value:e.editForm.edituserName,callback:function(t){e.editForm.edituserName=t},expression:"editForm.edituserName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"edituserNickName",label:"用户昵称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.edituserNickName,callback:function(t){e.editForm.edituserNickName=t},expression:"editForm.edituserNickName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"editorgId",label:"所属机构"}},[a("el-select",{attrs:{disabled:""},model:{value:e.editForm.editorgId,callback:function(t){e.editForm.editorgId=t},expression:"editForm.editorgId"}},e._l(e.addBranchList,function(e,t){return a("el-option",{key:t,attrs:{label:e.orgName,value:e.orgId}})}))],1),e._v(" "),a("el-form-item",{attrs:{prop:"editremark",label:"描述"}},[a("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.editForm.editremark,callback:function(t){e.editForm.editremark=t},expression:"editForm.editremark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.editOperator()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.editVisiable=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{size:"tiny",title:"分配用户角色",visible:e.roleVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roleVisible=t}}},[a("el-radio-group",{model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[e._l(e.roleList,function(t,o){return a("el-radio",{key:o,staticStyle:{display:"block"},attrs:{label:t.roleId}},[e._v(e._s(t.roleName))])}),e._v(" "),a("el-radio",{staticStyle:{display:"block"},attrs:{label:""}},[e._v("无角色")])],2),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.roleLoading},on:{click:function(t){e.submitRole()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.roleVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]}}});