webpackJsonp([1],{504:function(t,e,o){o(644);var a=o(181)(o(561),o(690),"data-v-7177b5b8",null);t.exports=a.exports},509:function(t,e,o){t.exports={default:o(512),__esModule:!0}},510:function(t,e){e.f={}.propertyIsEnumerable},511:function(t,e){e.f=Object.getOwnPropertySymbols},512:function(t,e,o){o(514),t.exports=o(47).Object.assign},513:function(t,e,o){"use strict";var a=o(184),r=o(511),i=o(510),n=o(185),s=o(186),l=Object.assign;t.exports=!l||o(124)(function(){var t={},e={},o=Symbol(),a="abcdefghijklmnopqrst";return t[o]=7,a.split("").forEach(function(t){e[t]=t}),7!=l({},t)[o]||Object.keys(l({},e)).join("")!=a})?function(t,e){for(var o=n(t),l=arguments.length,p=1,m=r.f,c=i.f;l>p;)for(var d,u=s(arguments[p++]),h=m?a(u).concat(m(u)):a(u),f=h.length,g=0;f>g;)c.call(u,d=h[g++])&&(o[d]=u[d]);return o}:l},514:function(t,e,o){var a=o(79);a(a.S+a.F,"Object",{assign:o(513)})},515:function(t,e,o){"use strict";e.__esModule=!0;var a=o(509),r=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t}},516:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(509),r=o.n(a),i=(o(183),o(182));e.default={data:function(){return{searchContent:{},total:"",pageNow:1,rows:10}},created:function(){this.initData({page:1,rows:10}),this.searchContent=r()({},this.searchData)},watch:{searchData:{handler:function(t,e){this.searchContent=r()({},this.searchData),this.searchContent.rows=this.rows,1==this.pageNow?this.initData(this.searchContent):this.pageNow=1},deep:!0},reload:function(){1==this.pageNow?this.initData(this.searchContent):this.pageNow=1}},methods:{initData:function(t){var e=this;o.i(i.c)(this,t,this.url,function(t){t.data.message?(e.total=0,e.$emit("tableContent",[])):(e.total=t.data.total,e.$emit("tableContent",t.data.rows))})},handleSizeChange:function(t){this.searchContent.rows=t,this.rows=t,this.initData(this.searchContent)},handleCurrentChange:function(t){this.searchContent.page=t,this.initData(this.searchContent)}},props:["searchData","url","reload"]}},517:function(t,e,o){e=t.exports=o(480)(!1),e.push([t.i,"",""])},518:function(t,e,o){var a=o(517);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(481)("6f170d66",a,!0)},519:function(t,e,o){o(518);var a=o(181)(o(516),o(520),"data-v-d3b730f0",null);t.exports=a.exports},520:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-pagination",{ref:"pagination",attrs:{total:parseInt(t.total),layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageNow},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageNow=e}}})},staticRenderFns:[]}},521:function(t,e,o){t.exports={default:o(522),__esModule:!0}},522:function(t,e,o){var a=o(47),r=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},530:function(t,e,o){"use strict";var a=o(660),r=o.n(a),i=o(659),n=o.n(i);r.a.Item=n.a;r.a},531:function(t,e,o){"use strict";function a(t,e,o){this.$children.forEach(function(r){r.$options.name===t?r.$emit.apply(r,[e].concat(o)):a.apply(r,[t,e].concat([o]))})}e.a={methods:{dispatch:function(t,e,o){for(var a=this.$parent||this.$root,r=a.$options.name;a&&(!r||r!==t);)(a=a.$parent)&&(r=a.$options.name);a&&a.$emit.apply(a,[e].concat(o))},broadcast:function(t,e,o){a.call(this,t,e,o)}}}},532:function(t,e,o){"use strict";function a(t,e){for(var o=0;o<e.length;o++)if(t===e[o])return!0;return!1}e.a=a;window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver},533:function(t,e,o){"use strict";function a(t,e){var o=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var a=e.split("."),r=0,i=a.length;r<i-1;++r){var n=a[r];if(!(n in o))throw new Error("[iView warn]: please transfer a valid prop path to form item!");o=o[n]}return{o:o,k:a[r],v:o[a[r]]}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(188),i=o.n(r),n=o(191),s=o.n(n),l=o(531),p="ivu-form-item";e.default={name:"FormItem",mixins:[l.a],props:{label:{type:String,default:""},labelWidth:{type:Number},prop:{type:String},required:{type:Boolean,default:!1},rules:{type:[Object,Array]},error:{type:String},validateStatus:{type:Boolean},showMessage:{type:Boolean,default:!0}},data:function(){return{prefixCls:p,isRequired:!1,validateState:"",validateMessage:"",validateDisabled:!1,validator:{}}},watch:{error:function(t){this.validateMessage=t,this.validateState="error"},validateStatus:function(t){this.validateState=t}},computed:{classes:function(){var t;return[""+p,(t={},i()(t,p+"-required",this.required||this.isRequired),i()(t,p+"-error","error"===this.validateState),i()(t,p+"-validating","validating"===this.validateState),t)]},form:function(){for(var t=this.$parent;"iForm"!==t.$options.name;)t=t.$parent;return t},fieldValue:{cache:!1,get:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),a(t,e).v}}},labelStyles:function(){var t={},e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e+"px"),t},contentStyles:function(){var t={},e=this.labelWidth||this.form.labelWidth;return e&&(t.marginLeft=e+"px"),t}},methods:{getRules:function(){var t=this.form.rules,e=this.rules;return t=t?t[this.prop]:[],[].concat(e||t||[])},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||-1!==e.trigger.indexOf(t)})},validate:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=this.getFilteredRule(t);if(!a||0===a.length)return o(),!0;this.validateState="validating";var r={};r[this.prop]=a;var i=new s.a(r),n={};n[this.prop]=this.fieldValue,i.validate(n,{firstFields:!0},function(t){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",o(e.validateMessage)})},resetField:function(){this.validateState="",this.validateMessage="";var t=this.form.model,e=this.fieldValue,o=this.prop;-1!==o.indexOf(":")&&(o=o.replace(/:/,"."));var r=a(t,o);Array.isArray(e)?(this.validateDisabled=!0,r.o[r.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,r.o[r.k]=this.initialValue)},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){if(this.validateDisabled)return void(this.validateDisabled=!1);this.validate("change")}},mounted:function(){var t=this;if(this.prop){this.dispatch("iForm","on-form-item-add",this),Object.defineProperty(this,"initialValue",{value:this.fieldValue});var e=this.getRules();e.length&&(e.every(function(e){if(e.required)return t.isRequired=!0,!1}),this.$on("on-form-blur",this.onFieldBlur),this.$on("on-form-change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("iForm","on-form-item-remove",this)}}},534:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(188),r=o.n(a),i=o(532);e.default={name:"iForm",props:{model:{type:Object},rules:{type:Object},labelWidth:{type:Number},labelPosition:{validator:function(t){return o.i(i.a)(t,["left","right","top"])},default:"right"},inline:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0}},data:function(){return{fields:[]}},computed:{classes:function(){return["ivu-form","ivu-form-label-"+this.labelPosition,r()({},"ivu-form-inline",this.inline)]}},methods:{resetFields:function(){this.fields.forEach(function(t){t.resetField()})},validate:function(t){var e=this,o=!0,a=0;this.fields.forEach(function(r){r.validate("",function(r){r&&(o=!1),"function"==typeof t&&++a===e.fields.length&&t(o)})})},validateField:function(t,e){var o=this.fields.filter(function(e){return e.prop===t})[0];if(!o)throw new Error("[iView warn]: must call validateField with valid prop string!");o.validate("",e)},formSubmit:function(t){t.preventDefault()}},watch:{rules:function(){this.validate()}},created:function(){var t=this;this.$on("on-form-item-add",function(e){return e&&t.fields.push(e),!1}),this.$on("on-form-item-remove",function(e){return e.prop&&t.fields.splice(t.fields.indexOf(e),1),!1})}}},561:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(515),r=o.n(a),i=o(521),n=o.n(i),s=o(182),l=(o(530),o(183)),p=o(519),m=o.n(p);e.default={data:function(){return{url:"/aas/admin/term/query.do",tableData:[],buttonData:[],tableHeight:"",reaHeight:"45px",iconClass:"el-icon-arrow-down",reload:!1,addLoading:!1,expKeyLoading:!1,expSnLoading:!1,expProSnLoading:!1,impLoading:!1,termType:"",itemNo:"",batchNo:"",termId:"",termExportStatus:"",publishStatus:"",unionLogo:"",termStatus:"",searchData:{page:1,rows:10,termType:"",itemNo:"",batchNo:"",termId:"",termExportStatus:"",publishStatus:"",unionLogo:"",termStatus:""},fileName:"",importVisiable:!1,importForm:{upFile:"",importupFile:""},termTypeListCre:[],addVisiable:!1,addForm:{addtermType:"",additemNo:"",addtermNum:"",addbatchNo:""},exportKeyVisiable:!1,exportKeyForm:{exportKeytermType:"",exportKeyitemNo:"",exportKeybatchNo:""},exportSnVisiable:!1,exportSnForm:{exportSntermType:"",exportSnitemNo:"",exportSnbatchNo:""},exportProSnVisiable:!1,exportProSnForm:{exportProSntermType:"",exportProSnitemNo:"",exportProSnbatchNo:""},termTypeList:[],itemNoList:[],batchNoList:[],dialogItemNoList:[],dialogBatchNoList:[],rules:{importupFile:[{required:!0,message:"请选择文件",trigger:"change"}],addtermType:[{required:!0,trigger:"change",message:"请选择终端类型"}],additemNo:[{required:!0,trigger:"change",message:"请选择终端型号"}],addtermNum:[{required:!0,trigger:"blur",message:"请输入终端数量"},{validator:function(t,e,o){0==/^\S*$/.test(e)?o(new Error("不能包含空格")):o()},trigger:"blur"},{validator:function(t,e,o){0==!/[^\d]/.test(e)&&parseFloat(e)>0?o(new Error("请输入一个大于0的整数")):o()},trigger:"blur"}],addbatchNo:[{required:!0,trigger:"blur",message:"请输入批次号"},{max:19,message:"输入字符长度不超过19个",trigger:"blur"},{validator:function(t,e,o){0==/^\S*$/.test(e)?o(new Error("不能包含空格")):o()},trigger:"blur"},{validator:function(t,e,o){0==/^[a-zA-Z0-9\u65e0]+$/.test(e)?o(new Error("请输入英文字母或数字")):o()},trigger:"blur"}],exportKeytermType:[{required:!0,trigger:"change",message:"请选择终端类型"}],exportKeyitemNo:[{required:!0,trigger:"change",message:"请选择终端型号"}],exportKeybatchNo:[{required:!0,trigger:"change",message:"请选择批次号"}],exportSntermType:[{required:!0,trigger:"change",message:"请选择终端类型"}],exportSnitemNo:[{required:!0,trigger:"change",message:"请选择终端型号"}],exportSnbatchNo:[{required:!0,trigger:"change",message:"请选择批次号"}],exportProSntermType:[{required:!0,trigger:"change",message:"请选择终端类型"}],exportProSnitemNo:[{required:!0,trigger:"change",message:"请选择终端型号"}],exportProSnbatchNo:[{required:!0,trigger:"change",message:"请选择批次号"}]},rowData:[]}},created:function(){var t=this;this.tableHeight=document.documentElement.clientHeight-215,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-215},o.i(s.a)(this,{},"/aas/admin/termitemno/queryTermType.do",function(e){if("没有权限"==e.data.message)t.$notify.warning({title:"消息",message:"没有权限"});else{for(var o=n()(e.data),a=o.substring(1,o.length-1).split(","),r=[],i=0;i<a.length;i++){var s={},l=a[i].substring(1,a[i].length-1).split(":");s.typeCode=l[0].substring(0,l[0].length-1),s.typeName=l[1].substring(1,l[1].length),r.push(s)}t.termTypeList=r}});var e="";if(window.localStorage){e=window.localStorage.getItem("popedoms")}else e=localStorage.getItem("popedoms");if(this.buttonData=[],e)for(var a=JSON.parse(e),r=a.length,i=0;i<r;i++)11==a[i].popedomButton&&this.buttonData.push(a[i])},computed:r()({},o.i(l.b)(["popedomList"])),methods:r()({},o.i(l.c)(["getPopedom"]),{tableContent:function(t){this.tableData=t||[]},showMore:function(){"auto"==this.reaHeight?(this.reaHeight="45px",this.iconClass="el-icon-arrow-down"):(this.reaHeight="auto",this.iconClass="el-icon-arrow-up")},search:function(){if(this.termId=this.termId.replace(/(^\s*)|(\s*$)/g,""),this.unionLogo=this.unionLogo.replace(/(^\s*)|(\s*$)/g,""),this.termId&&0==!/\W/.test(this.termId))this.$notify.warning({title:"消息",message:"终端序列号只能包含数字或英文字母"});else{for(var t in this.searchData)"page"==t&&"rows"==t||(this.searchData[t]=this[t]);this.searchData.page=1,this.searchData.rows=10}},reset:function(){this.termType="",this.itemNo="",this.termId="",this.termExportStatus="",this.publishStatus="",this.unionLogo="",this.termStatus=""},buttonClick:function(t){var e=this;switch(t){case"openImportDialog()":e.openImportDialog();break;case"openCreateTermKey()":e.openCreateTermKey();break;case"exportKeyByBatchDialog()":e.exportKeyByBatchDialog();break;case"exportSnByBatchDialog()":e.exportSnByBatchDialog();break;case"openExportKeyDialog()":e.openExportKeyDialog();break;case"openExportSnDialog()":e.openExportSnDialog();break;case"exportProSnByBatchDialog()":e.exportProSnByBatchDialog();break;case"openExportProSnDialog()":e.openExportProSnDialog()}},getItemNoByTermType:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/termitemno/queryByType.do?termType="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.itemNoList=t.data}),this.itemNo="",this.batchNo=""},getBatchNoByItemNoTermType:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/term/queryBatchNo.do?termType="+this.termType+"&itemNo="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.batchNoList=t.data}),this.batchNo=""},getItemNoByTermTypeCre:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/termitemno/queryByType.do?termType="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogItemNoList=t.data}),this.addForm.additemNo=""},getItemNoByTermTypeExportKey:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/termitemno/queryByType.do?termType="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogItemNoList=t.data}),this.exportKeyForm.exportKeyitemNo="",this.exportKeyForm.exportKeybatchNo=""},getBatchNoByItemNoTermTypeExportKey:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/term/queryBatchNo.do?termType="+this.exportKeyForm.exportKeytermType+"&itemNo="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogBatchNoList=t.data}),this.exportKeyForm.exportKeybatchNo=""},getItemNoByTermTypeExportSn:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/termitemno/queryByType.do?termType="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogItemNoList=t.data}),this.exportSnForm.exportSnitemNo="",this.exportSnForm.exportSnbatchNo=""},getBatchNoByItemNoTermTypeExportSn:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/term/queryBatchNo.do?termType="+this.exportSnForm.exportSntermType+"&itemNo="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogBatchNoList=t.data}),this.exportSnForm.exportSnbatchNo=""},getItemNoByTermTypeExportProSn:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/termitemno/queryByType.do?termType="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogItemNoList=t.data}),this.exportProSnForm.exportProSnitemNo="",this.exportProSnForm.exportProSnbatchNo=""},getBatchNoByItemNoTermTypeExportProSn:function(t){var e=this;o.i(s.a)(this,{},"/aas/admin/term/queryBatchNo.do?termType="+this.exportProSnForm.exportProSntermType+"&itemNo="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.dialogBatchNoList=t.data}),this.exportProSnForm.exportProSnbatchNo=""},openCreateTermKey:function(){this.dialogItemNoList=[],this.$refs.addForm&&this.$refs.addForm.resetFields(),this.addLoading=!1,this.addVisiable=!0},createTermKey:function(){var t=this;this.$refs.addForm.validate(function(e){if(!e)return!1;if(t.addForm.addtermNum<1||t.addForm.addtermNum>1e4)t.$message({message:"终端数量范围在1~10000",type:"error"});else{t.addLoading=!0;var a={};for(var r in t.addForm)a[r.substring(3)]=t.addForm[r];o.i(s.b)(t,a,"/aas/admin/term/add.do",function(e){e.data&&e.data.type&&(t.addVisiable=!1,t.$message({message:"添加成功",type:"success"}),t.reload=!t.reload),t.addLoading=!1})}})},exportKeyByBatchDialog:function(){this.dialogItemNoList=[],this.dialogBatchNoList=[],this.expKeyLoading=!1,this.exportKeyVisiable=!0,this.$refs.exportKeyForm&&this.$refs.exportKeyForm.resetFields()},exportKeyByBatchNo:function(){var t=this;this.$refs.exportKeyForm.validate(function(e){if(!e)return!1;t.expKeyLoading=!0,o.i(s.b)(t,{},"/aas/testdownload/downloadKeysByBatchNoTest.do?termType="+t.exportKeyForm.exportKeytermType+"&itemNo="+t.exportKeyForm.exportKeyitemNo+"&batchNo="+t.exportKeyForm.exportKeybatchNo+" ",function(e){if(e.data&&e.data.type){window.open("/aas/admin/term/downloadKeysByBatchNo.do?termType="+t.exportKeyForm.exportKeytermType+"&itemNo="+t.exportKeyForm.exportKeyitemNo+"&batchNo="+t.exportKeyForm.exportKeybatchNo+" "),t.exportKeyVisiable=!1;var o=t;setTimeout(function(){o.reload=!o.reload},300)}t.expKeyLoading=!1})})},exportSnByBatchDialog:function(){this.dialogItemNoList=[],this.dialogBatchNoList=[],this.expSnLoading=!1,this.exportSnVisiable=!0,this.$refs.exportSnForm&&this.$refs.exportSnForm.resetFields()},exportSnByBatchNo:function(){var t=this;this.$refs.exportSnForm.validate(function(e){if(!e)return!1;t.expSnLoading=!0,o.i(s.b)(t,{},"/aas/testdownload/downloadTermsByBatchNoTest.do?termType="+t.exportSnForm.exportSntermType+"&itemNo="+t.exportSnForm.exportSnitemNo+"&batchNo="+t.exportSnForm.exportSnbatchNo+" ",function(e){if(e.data&&e.data.type){window.open("/aas/admin/term/downloadTermsByBatchNo.do?termType="+t.exportSnForm.exportSntermType+"&itemNo="+t.exportSnForm.exportSnitemNo+"&batchNo="+t.exportSnForm.exportSnbatchNo+" "),t.exportSnVisiable=!1;var o=t;setTimeout(function(){o.reload=!o.reload},300)}t.expSnLoading=!1})})},exportProSnByBatchDialog:function(){this.dialogItemNoList=[],this.dialogBatchNoList=[],this.expProSnLoading=!1,this.exportProSnVisiable=!0,this.$refs.exportProSnForm&&this.$refs.exportProSnForm.resetFields()},exportProSnByBatchNo:function(){var t=this;this.$refs.exportProSnForm.validate(function(e){if(!e)return!1;t.expProSnLoading=!0,o.i(s.b)(t,{},"/aas/testdownload/downloadProTermsByBatchNoTest.do?termType="+t.exportProSnForm.exportProSntermType+"&itemNo="+t.exportProSnForm.exportProSnitemNo+"&batchNo="+t.exportProSnForm.exportProSnbatchNo+" ",function(e){if(e.data&&e.data.type){window.open("/aas/admin/term/downloadProTermsByBatchNo.do?termType="+t.exportProSnForm.exportProSntermType+"&itemNo="+t.exportProSnForm.exportProSnitemNo+"&batchNo="+t.exportProSnForm.exportProSnbatchNo+" "),t.exportProSnVisiable=!1;var o=t;setTimeout(function(){o.reload=!o.reload},300)}t.expProSnLoading=!1})})},openExportKeyDialog:function(){var t=this;if(this.isSelect()){for(var e=this.rowData.length,a="",r=!0,i=[],n=0;n<e;n++)this.rowData[0].termType!=this.rowData[n].termType||this.rowData[0].itemNo!=this.rowData[n].itemNo?i.push(0):i.push(1);for(var n=0;n<i.length;n++){if(!i[n]){r=!1;break}a+=this.rowData[n].termId+","}r?this.$confirm("确定导出银联密钥？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.i(s.b)(t,{},"/aas/testdownload/downloadKeysByIdsTest.do?termIds="+a+"&termType="+t.rowData[0].termType+"&itemNo="+t.rowData[0].itemNo,function(e){if(e.data&&e.data.type){window.open("/aas/admin/term/downloadKeysByIds.do?termIds="+a+"&termType="+t.rowData[0].termType+"&itemNo="+t.rowData[0].itemNo);var o=t;setTimeout(function(){o.reload=!o.reload},300)}})}).catch(function(){}):this.$notify.warning({title:"消息",message:"所选的终端不是同一类型或者不是同一型号"})}},openExportSnDialog:function(){var t=this;if(this.isSelect()){for(var e=this.rowData.length,a="",r=!0,i=[],n=0;n<e;n++)this.rowData[0].termType!=this.rowData[n].termType?i.push(0):i.push(1);for(var n=0;n<i.length;n++){if(!i[n]){r=!1;break}a+=this.rowData[n].termId+","}r?this.$confirm("确定导出序列号？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.i(s.b)(t,{},"/aas/testdownload/downloadTermsByIdsTest.do?termIds="+a,function(e){if(e.data&&e.data.type){window.open("/aas/admin/term/downloadTermsByIds.do?termIds="+a);var o=t;setTimeout(function(){o.reload=!o.reload},300)}})}).catch(function(){}):this.$notify.info({title:"消息",message:"所选的终端不是同一类型"})}},openExportProSnDialog:function(){var t=this;if(this.isSelect()){for(var e=this.rowData.length,a="",r=!0,i=[],n=0;n<e;n++)this.rowData[0].termType!=this.rowData[n].termType?i.push(0):i.push(1);for(var n=0;n<i.length;n++){if(!i[n]){r=!1;break}a+=this.rowData[n].termId+","}r?this.$confirm("确定导出生产密钥？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.i(s.b)(t,{},"/aas/testdownload/downloadProTermsByIdsTest.do?termIds="+a+"&termType="+t.rowData[0].termType,function(e){if(e.data&&e.data.type){window.open("/aas/admin/term/downloadProTermsByIds.do?termIds="+a+"&termType="+t.rowData[0].termType);var o=t;setTimeout(function(){o.reload=!o.reload},300)}})}).catch(function(){}):this.$notify.warning({title:"消息",message:"所选的终端不是同一类型"})}},openImportDialog:function(){this.$refs.importForm&&(this.$refs.importForm.resetFields(),this.fileName="",this.$refs.file.value=""),this.impLoading=!1,this.importVisiable=!0},importFile:function(){var t=this;this.$refs.importForm.validate(function(e){if(!e)return!1;var a=t.importForm.upFile.name,r=a.split(".");"xlsx"==r[r.length-1]||"xls"==r[r.length-1]?(t.impLoading=!0,o.i(s.d)(t,t.importForm,"/aas/admin/term/updateUnionLogo.do",function(e){e.data&&e.data.type&&(t.importVisiable=!1,t.$message({message:"上传成功",type:"success"}),t.reload=!t.reload),t.impLoading=!1})):t.$notify.warning({title:"消息",message:"请上传xlsx或xls格式文件"})})},selectFile:function(){this.$refs.file.click()},fileChange:function(){this.fileName=this.$refs.file.files[0].name,this.importForm.importupFile=this.$refs.file.files[0].name,this.importForm.upFile=this.$refs.file.files[0]},confirm:function(t,e,a){var r=this;this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.i(s.b)(r,{userId:r.rowData.userId},e,function(t){t.data&&t.data.type&&(r.$message({message:a,type:"success"}),r.reload=!r.reload)})}).catch(function(){})},select:function(t){this.rowData=t},isSelect:function(){return!(!this.rowData||0==this.rowData.length)||(this.$notify.info({title:"消息",message:"请选择一条记录"}),!1)}}),components:{pagerows:m.a}}},615:function(t,e,o){e=t.exports=o(480)(!1),e.push([t.i,".handle .el-button[data-v-7177b5b8]{margin-top:3px}.search[data-v-7177b5b8]{position:relative;overflow:hidden;margin-bottom:7px;padding:3px 10px 8px;border:1px solid #f6f6f6;box-shadow:3px 3px 5px #aaa;border-radius:5px}.searchLeft[data-v-7177b5b8]{width:100%;padding-right:185px;height:45px;overflow:hidden;box-sizing:border-box}.searchRight[data-v-7177b5b8]{position:absolute;right:0;top:0;width:185px;z-index:10}.more[data-v-7177b5b8]{position:absolute;left:50%;bottom:-4px;z-index:15;padding:3px 10px 0;color:#999;cursor:pointer;border:1px solid #f1f1f1;border-bottom:0;border-radius:3px;background:#4570bb;color:#fff}.search .el-button[data-v-7177b5b8]{margin-top:8px}.search .el-input[data-v-7177b5b8],.search .el-select[data-v-7177b5b8]{width:160px}.iconfont[data-v-7177b5b8]{font-size:16px;margin-right:4px}.el-alert[data-v-7177b5b8]{margin-bottom:15px}.demo-table-expand[data-v-7177b5b8]{font-size:0}.demo-table-expand label[data-v-7177b5b8]{width:90px;color:#99a9bf}.demo-table-expand .el-form-item[data-v-7177b5b8]{margin-right:0;margin-bottom:0;width:50%}.itemValue[data-v-7177b5b8]{color:#1d8ce0;font-size:15px;white-space:pre}",""])},644:function(t,e,o){var a=o(615);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(481)("2f5131da",a,!0)},659:function(t,e,o){var a=o(181)(o(533),o(665),null,null);t.exports=a.exports},660:function(t,e,o){var a=o(181)(o(534),o(681),null,null);t.exports=a.exports},665:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.classes},[t.label?o("label",{class:[t.prefixCls+"-label"],style:t.labelStyles},[t._t("label",[t._v(t._s(t.label))])],2):t._e(),t._v(" "),o("div",{class:[t.prefixCls+"-content"],style:t.contentStyles},[t._t("default"),t._v(" "),o("transition",{attrs:{name:"fade"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?o("div",{class:[t.prefixCls+"-error-tip"]},[t._v(t._s(t.validateMessage))]):t._e()])],2)])},staticRenderFns:[]}},681:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{class:t.classes,on:{submit:t.formSubmit}},[t._t("default")],2)},staticRenderFns:[]}},690:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"operatorPage page"},[o("section",{staticClass:"handle"},[t._l(t.buttonData,function(e,a){return t.buttonData.length?[o("el-button",{key:a,attrs:{size:"small",type:"primary"},on:{click:function(o){t.buttonClick(e.buttonLink)}}},[o("i",{staticClass:"iconfont",class:e.iconLink}),t._v(t._s(e.popedomName))])]:t._e()})],2),t._v(" "),o("section",{staticClass:"search"},[o("div",{staticClass:"searchLeft",style:{height:t.reaHeight}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"终端序列号"}},[o("el-input",{attrs:{size:"small",placeholder:"终端序列号"},model:{value:t.termId,callback:function(e){t.termId=e},expression:"termId"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"终端类型"}},[o("el-select",{attrs:{size:"small"},on:{change:t.getItemNoByTermType},model:{value:t.termType,callback:function(e){t.termType=e},expression:"termType"}},t._l(t.termTypeList,function(t,e){return o("el-option",{key:e,attrs:{label:t.typeName,value:t.typeCode}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"终端型号"}},[o("el-select",{attrs:{size:"small"},on:{change:t.getBatchNoByItemNoTermType},model:{value:t.itemNo,callback:function(e){t.itemNo=e},expression:"itemNo"}},t._l(t.itemNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"银联终端标识"}},[o("el-input",{attrs:{size:"small",placeholder:"银联终端标识"},model:{value:t.unionLogo,callback:function(e){t.unionLogo=e},expression:"unionLogo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"生成批次"}},[o("el-select",{attrs:{size:"small"},model:{value:t.batchNo,callback:function(e){t.batchNo=e},expression:"batchNo"}},t._l(t.batchNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"发行状态"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.publishStatus,callback:function(e){t.publishStatus=e},expression:"publishStatus"}},[o("el-option",{attrs:{label:"未发行",value:"0"}}),t._v(" "),o("el-option",{attrs:{label:"联机发行中",value:"1"}}),t._v(" "),o("el-option",{attrs:{label:"离线发行中",value:"2"}}),t._v(" "),o("el-option",{attrs:{label:"已发行",value:"3"}}),t._v(" "),o("el-option",{attrs:{label:"发行失败",value:"4"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"终端秘钥导出状态"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.termExportStatus,callback:function(e){t.termExportStatus=e},expression:"termExportStatus"}},[o("el-option",{attrs:{label:"未导出",value:"00"}}),t._v(" "),o("el-option",{attrs:{label:"已导出",value:"01"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"终端状态"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.termStatus,callback:function(e){t.termStatus=e},expression:"termStatus"}},[o("el-option",{attrs:{label:"未发货",value:"00"}}),t._v(" "),o("el-option",{attrs:{label:"已发货",value:"01"}}),t._v(" "),o("el-option",{attrs:{label:"已备货",value:"02"}})],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"searchRight"},[o("el-button",{attrs:{size:"small",icon:"search",type:"primary"},on:{click:function(e){t.search()}}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{size:"small",icon:"circle-close",type:"primary"},on:{click:function(e){t.reset()}}},[t._v("重置")])],1),t._v(" "),o("span",{staticClass:"more",on:{click:t.showMore}},[o("i",{class:t.iconClass})])]),t._v(" "),o("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:t.tableHeight,border:"",stripe:"",data:t.tableData},on:{"selection-change":t.select}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[o("el-form-item",{attrs:{label:"订单号:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.orderId))])]),t._v(" "),o("el-form-item",{attrs:{label:"终端类型:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termTypeName))])]),t._v(" "),o("el-form-item",{attrs:{label:"终端生成时间:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.createDatetime))])]),t._v(" "),o("el-form-item",{attrs:{label:"终端发行时间:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.publishDatetime))])]),t._v(" "),o("el-form-item",{attrs:{label:"终端编码:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termCode))])]),t._v(" "),o("el-form-item",{attrs:{label:"批次号:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.batchNo))])]),t._v(" "),o("el-form-item",{attrs:{label:"银联秘钥导出次数:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termExportNum))])]),t._v(" "),o("el-form-item",{attrs:{label:"银联秘钥导出状态:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termExportStatusName))])]),t._v(" "),o("el-form-item",{attrs:{label:"银联秘钥导出时间:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termExportUpdateDatetime))])]),t._v(" "),o("el-form-item",{attrs:{label:"序列号导出批次:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.taskBatchNo))])]),t._v(" "),o("el-form-item",{attrs:{label:"序列号导出时间:"}},[o("span",{staticClass:"itemValue"},[t._v(t._s(e.row.taskCreateDatetime))])])],1)]}}])}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",width:"50"}}),t._v(" "),o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"终端序列号",prop:"termId","min-width":"180"}}),t._v(" "),o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"终端型号",prop:"itemNo","min-width":"160"}}),t._v(" "),o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"发行状态",prop:"publishStatusName","min-width":"140"}}),t._v(" "),o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"序列号导出状态",prop:"taskTermIdExportStatus","min-width":"140"}}),t._v(" "),o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"终端状态",prop:"termStatus","min-width":"120"}}),t._v(" "),o("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"银联终端标识",prop:"unionLogo","min-width":"120"}})],1),t._v(" "),o("pagerows",{attrs:{searchData:t.searchData,url:t.url,reload:t.reload},on:{tableContent:t.tableContent}}),t._v(" "),o("el-dialog",{attrs:{size:"tiny",title:"生成终端序列号和秘钥 ",visible:t.addVisiable,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addVisiable=e}}},[o("el-alert",{attrs:{title:"点击提交后无论成功与否请一分钟后再进行操作！",type:"info","show-icon":""}}),t._v(" "),o("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{prop:"addtermType",label:"终端类型"}},[o("el-select",{on:{change:t.getItemNoByTermTypeCre},model:{value:t.addForm.addtermType,callback:function(e){t.addForm.addtermType=e},expression:"addForm.addtermType"}},t._l(t.termTypeList,function(t,e){return o("el-option",{key:e,attrs:{label:t.typeName,value:t.typeCode}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"additemNo",label:"终端型号"}},[o("el-select",{model:{value:t.addForm.additemNo,callback:function(e){t.addForm.additemNo=e},expression:"addForm.additemNo"}},t._l(t.dialogItemNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"addtermNum",label:"终端数量"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.addtermNum,callback:function(e){t.addForm.addtermNum=e},expression:"addForm.addtermNum"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"addbatchNo",label:"生成批次"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.addbatchNo,callback:function(e){t.addForm.addbatchNo=e},expression:"addForm.addbatchNo"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:t.addLoading},on:{click:function(e){t.createTermKey()}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.addVisiable=!1}}},[t._v("取 消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{size:"tiny",title:"导出银联秘钥（批次）",visible:t.exportKeyVisiable,"close-on-click-modal":!1},on:{"update:visible":function(e){t.exportKeyVisiable=e}}},[o("el-form",{ref:"exportKeyForm",attrs:{model:t.exportKeyForm,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{prop:"exportKeytermType",label:"终端类型"}},[o("el-select",{on:{change:t.getItemNoByTermTypeExportKey},model:{value:t.exportKeyForm.exportKeytermType,callback:function(e){t.exportKeyForm.exportKeytermType=e},expression:"exportKeyForm.exportKeytermType"}},t._l(t.termTypeList,function(t,e){return o("el-option",{key:e,attrs:{label:t.typeName,value:t.typeCode}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"exportKeyitemNo",label:"终端型号"}},[o("el-select",{on:{change:t.getBatchNoByItemNoTermTypeExportKey},model:{value:t.exportKeyForm.exportKeyitemNo,callback:function(e){t.exportKeyForm.exportKeyitemNo=e},expression:"exportKeyForm.exportKeyitemNo"}},t._l(t.dialogItemNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"exportKeybatchNo",label:"生成批次"}},[o("el-select",{model:{value:t.exportKeyForm.exportKeybatchNo,callback:function(e){t.exportKeyForm.exportKeybatchNo=e},expression:"exportKeyForm.exportKeybatchNo"}},t._l(t.dialogBatchNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:t.expKeyLoading},on:{click:function(e){t.exportKeyByBatchNo()}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.exportKeyVisiable=!1}}},[t._v("取 消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{size:"tiny",title:"导出序列号（批次）",visible:t.exportSnVisiable,"close-on-click-modal":!1},on:{"update:visible":function(e){t.exportSnVisiable=e}}},[o("el-form",{ref:"exportSnForm",attrs:{model:t.exportSnForm,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{prop:"exportSntermType",label:"终端类型"}},[o("el-select",{on:{change:t.getItemNoByTermTypeExportSn},model:{value:t.exportSnForm.exportSntermType,callback:function(e){t.exportSnForm.exportSntermType=e},expression:"exportSnForm.exportSntermType"}},t._l(t.termTypeList,function(t,e){return o("el-option",{key:e,attrs:{label:t.typeName,value:t.typeCode}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"exportSnitemNo",label:"终端型号"}},[o("el-select",{on:{change:t.getBatchNoByItemNoTermTypeExportSn},model:{value:t.exportSnForm.exportSnitemNo,callback:function(e){t.exportSnForm.exportSnitemNo=e},expression:"exportSnForm.exportSnitemNo"}},t._l(t.dialogItemNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"exportSnbatchNo",label:"生成批次"}},[o("el-select",{model:{value:t.exportSnForm.exportSnbatchNo,callback:function(e){t.exportSnForm.exportSnbatchNo=e},expression:"exportSnForm.exportSnbatchNo"}},t._l(t.dialogBatchNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:t.expSnLoading},on:{click:function(e){t.exportSnByBatchNo()}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.exportSnVisiable=!1}}},[t._v("取 消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{size:"tiny",title:"导出生产秘钥（批次）",visible:t.exportProSnVisiable,"close-on-click-modal":!1},on:{"update:visible":function(e){t.exportProSnVisiable=e}}},[o("el-form",{ref:"exportProSnForm",attrs:{model:t.exportProSnForm,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{prop:"exportProSntermType",label:"终端类型"}},[o("el-select",{on:{change:t.getItemNoByTermTypeExportProSn},model:{value:t.exportProSnForm.exportProSntermType,callback:function(e){t.exportProSnForm.exportProSntermType=e},expression:"exportProSnForm.exportProSntermType"}},t._l(t.termTypeList,function(t,e){return o("el-option",{key:e,attrs:{label:t.typeName,value:t.typeCode}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"exportProSnitemNo",label:"终端型号"}},[o("el-select",{on:{change:t.getBatchNoByItemNoTermTypeExportProSn},model:{value:t.exportProSnForm.exportProSnitemNo,callback:function(e){t.exportProSnForm.exportProSnitemNo=e},expression:"exportProSnForm.exportProSnitemNo"}},t._l(t.dialogItemNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{prop:"exportProSnbatchNo",label:"生成批次"}},[o("el-select",{model:{value:t.exportProSnForm.exportProSnbatchNo,callback:function(e){t.exportProSnForm.exportProSnbatchNo=e},expression:"exportProSnForm.exportProSnbatchNo"}},t._l(t.dialogBatchNoList,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:t.expProSnLoading},on:{click:function(e){t.exportProSnByBatchNo()}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.exportProSnVisiable=!1}}},[t._v("取 消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{size:"tiny",title:"导入银联二维码",visible:t.importVisiable,"close-on-click-modal":!1},on:{"update:visible":function(e){t.importVisiable=e}}},[o("el-form",{ref:"importForm",attrs:{model:t.importForm,rules:t.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"银联二维码文件",prop:"importupFile"}},[o("el-input",{staticStyle:{display:"none"},attrs:{"auto-complete":"off"},model:{value:t.importForm.importupFile,callback:function(e){t.importForm.importupFile=e},expression:"importForm.importupFile"}}),t._v(" "),o("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(e){t.fileChange(e)}}}),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.selectFile()}}},[t._v("选择文件")]),t._v(" "),t.fileName?o("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t.fileName))]):t._e()],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:t.impLoading},on:{click:function(e){t.importFile()}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.importVisiable=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]}}});