webpackJsonp([7],{507:function(t,e,a){a(642);var o=a(181)(a(564),a(688),"data-v-5e2c043e",null);t.exports=o.exports},509:function(t,e,a){t.exports={default:a(512),__esModule:!0}},510:function(t,e){e.f={}.propertyIsEnumerable},511:function(t,e){e.f=Object.getOwnPropertySymbols},512:function(t,e,a){a(514),t.exports=a(47).Object.assign},513:function(t,e,a){"use strict";var o=a(184),i=a(511),n=a(510),s=a(185),r=a(186),l=Object.assign;t.exports=!l||a(124)(function(){var t={},e={},a=Symbol(),o="abcdefghijklmnopqrst";return t[a]=7,o.split("").forEach(function(t){e[t]=t}),7!=l({},t)[a]||Object.keys(l({},e)).join("")!=o})?function(t,e){for(var a=s(t),l=arguments.length,c=1,d=i.f,h=n.f;l>c;)for(var m,p=r(arguments[c++]),u=d?o(p).concat(d(p)):o(p),f=u.length,g=0;f>g;)h.call(p,m=u[g++])&&(a[m]=p[m]);return a}:l},514:function(t,e,a){var o=a(79);o(o.S+o.F,"Object",{assign:a(513)})},516:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(509),i=a.n(o),n=(a(183),a(182));e.default={data:function(){return{searchContent:{},total:"",pageNow:1,rows:10}},created:function(){this.initData({page:1,rows:10}),this.searchContent=i()({},this.searchData)},watch:{searchData:{handler:function(t,e){this.searchContent=i()({},this.searchData),this.searchContent.rows=this.rows,1==this.pageNow?this.initData(this.searchContent):this.pageNow=1},deep:!0},reload:function(){1==this.pageNow?this.initData(this.searchContent):this.pageNow=1}},methods:{initData:function(t){var e=this;a.i(n.c)(this,t,this.url,function(t){t.data.message?(e.total=0,e.$emit("tableContent",[])):(e.total=t.data.total,e.$emit("tableContent",t.data.rows))})},handleSizeChange:function(t){this.searchContent.rows=t,this.rows=t,this.initData(this.searchContent)},handleCurrentChange:function(t){this.searchContent.page=t,this.initData(this.searchContent)}},props:["searchData","url","reload"]}},517:function(t,e,a){e=t.exports=a(480)(!1),e.push([t.i,"",""])},518:function(t,e,a){var o=a(517);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(481)("6f170d66",o,!0)},519:function(t,e,a){a(518);var o=a(181)(a(516),a(520),"data-v-d3b730f0",null);t.exports=o.exports},520:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-pagination",{ref:"pagination",attrs:{total:parseInt(t.total),layout:"total, sizes, prev, pager, next, jumper","current-page":t.pageNow},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pageNow=e}}})},staticRenderFns:[]}},521:function(t,e,a){t.exports={default:a(522),__esModule:!0}},522:function(t,e,a){var o=a(47),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},564:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(521),i=a.n(o),n=a(182),s=(a(183),a(519)),r=a.n(s);e.default={data:function(){return{tableHeight:"",tableData:[],buttonData:[],reload:!1,reaHeight:"45px",iconClass:"el-icon-arrow-down",termType:"",itemNo:"",termId:"",orderId:"",unionLogo:"",termTypeList:[],itemNoList:[],searchData:{rows:10,page:1,termType:"",itemNo:"",termId:"",orderId:"",unionLogo:""},url:"/aas/admin/union/query.do",rowData:"",keyLoading:!1,codeLoading:!1}},mounted:function(){var t=this;this.tableHeight=document.documentElement.clientHeight-225,window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-225},a.i(n.a)(this,{},"/aas/admin/termitemno/queryTermType.do",function(e){if(e.data){for(var a=i()(e.data),o=a.substring(1,a.length-1).split(","),n=[],s=0;s<o.length;s++){var r={},l=o[s].substring(1,o[s].length-1).split(":");r.typeCode=l[0].substring(0,l[0].length-1),r.typeName=l[1].substring(1,l[1].length),n.push(r)}t.termTypeList=n}});var e="";if(window.localStorage){e=window.localStorage.getItem("popedoms")}else e=localStorage.getItem("popedoms");if(this.buttonData=[],e)for(var o=JSON.parse(e),s=o.length,r=0;r<s;r++)17==o[r].popedomButton&&this.buttonData.push(o[r])},methods:{tableContent:function(t){this.tableData=t||[]},selectThis:function(t){this.keyForm.orderId=t.target.innerText,this.keyList=!1,this.orderIdList=[]},showMore:function(){"auto"==this.reaHeight?(this.reaHeight="45px",this.iconClass="el-icon-arrow-down"):(this.reaHeight="auto",this.iconClass="el-icon-arrow-up")},buttonClick:function(t){var e=this;switch(t){case"exportKeyByTermIds()":e.exportKeyByTermIds();break;case"exportCodeByTermIds()":e.exportCodeByTermIds()}},exportKeyByTermIds:function(){var t=this;if(this.rowData.length){for(var e=this.rowData.length,o="",i=!0,s=[],r=0;r<e;r++)this.rowData[0].itemNo!=this.rowData[r].itemNo?s.push(0):s.push(1);for(var r=0;r<s.length;r++){if(!s[r]){i=!1;break}o+=this.rowData[r].termId+","}i?this.$confirm("确定导出银联密钥？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.keyLoading=!0,a.i(n.b)(t,{},"testdownload/downloadKeysTestByTermIds.do?termIds="+o,function(e){if(e.data&&e.data.type){window.open("admin/union/downloadKeysByTermIds.do?termIds="+o);var a=t;setTimeout(function(){a.reload=!a.reload},800)}t.keyLoading=!1})}).catch(function(){}):this.$notify.warning({title:"消息",message:"请选择同一型号的序列号进行导出!"})}else this.$notify.warning({title:"消息",message:"至少选择一条数据"})},exportCodeByTermIds:function(){var t=this;if(this.rowData.length){for(var e=this.rowData.length,o="",i=!0,s=[],r=0;r<e;r++)this.rowData[0].itemNo!=this.rowData[r].itemNo?s.push(0):s.push(1);for(var r=0;r<s.length;r++){if(!s[r]){i=!1;break}o+=this.rowData[r].termId+","}i?this.$confirm("确定导出银联二维码？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.codeLoading=!0,a.i(n.b)(t,{},"testdownload/ExportUnionLogoTestByIds.do?termIds="+o,function(e){if(e.data&&e.data.type){window.open("admin/union/ExportUnionLogoByIds.do?termIds="+o);var a=t;setTimeout(function(){a.reload=!a.reload},800)}t.codeLoading=!1})}).catch(function(){}):this.$notify.warning({title:"消息",message:"请选择同一型号的序列号进行导出!"})}else this.$notify.warning({title:"消息",message:"至少选择一条数据"})},getItemNoByTermType:function(t){var e=this;a.i(n.a)(this,{},"/aas/admin/termitemno/queryByType.do?termType="+t,function(t){"没有权限"==t.data.message?e.$notify.warning({title:"消息",message:"没有权限"}):e.itemNoList=t.data}),this.itemNo=""},search:function(){if(this.termId=this.termId.replace(/(^\s*)|(\s*$)/g,""),this.unionLogo=this.unionLogo.replace(/(^\s*)|(\s*$)/g,""),this.termId&&0==!/\W/.test(this.termId))this.$notify.warning({title:"消息",message:"终端序列号只能包含数字或英文字母"});else if(this.orderId&&0==/^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(this.orderId))this.$notify.warning({title:"消息",message:"订单号只能包含数字、英文字母或中文"});else{for(var t in this.searchData)"page"==t&&"rows"==t||(this.searchData[t]=this[t]);this.searchData.page=1,this.searchData.rows=10}},reset:function(){this.termType="",this.itemNo="",this.termId="",this.orderId="",this.unionLogo=""},select:function(t){this.rowData=t}},components:{pagerows:r.a}}},613:function(t,e,a){e=t.exports=a(480)(!1),e.push([t.i,".handle[data-v-5e2c043e]{margin-bottom:6px}.search[data-v-5e2c043e]{position:relative;overflow:hidden;margin-bottom:8px;padding:5px 10px 8px;border:1px solid #f6f6f6;box-shadow:3px 3px 5px #aaa;border-radius:5px}.searchLeft[data-v-5e2c043e]{width:100%;padding-right:185px;height:45px;overflow:hidden;box-sizing:border-box}.searchRight[data-v-5e2c043e]{position:absolute;right:0;top:0;width:185px;z-index:10}.more[data-v-5e2c043e]{position:absolute;left:50%;bottom:-4px;z-index:15;padding:3px 10px 0;color:#999;cursor:pointer;border:1px solid #f1f1f1;border-bottom:0;border-radius:3px;background:#4570bb;color:#fff}.search .el-button[data-v-5e2c043e]{margin-top:10px}.el-dialog .el-form .el-input[data-v-5e2c043e],.el-dialog .el-form .el-select[data-v-5e2c043e]{width:200px}.search .el-input[data-v-5e2c043e],.search .el-select[data-v-5e2c043e]{width:160px}.iconfont[data-v-5e2c043e]{font-size:16px;margin-right:4px}.el-alert[data-v-5e2c043e]{margin-bottom:15px}.demo-table-expand[data-v-5e2c043e]{font-size:0}.demo-table-expand label[data-v-5e2c043e]{width:90px;color:#99a9bf}.demo-table-expand .el-form-item[data-v-5e2c043e]{margin-right:0;margin-bottom:0;width:50%}.itemValue[data-v-5e2c043e]{color:#1d8ce0;font-size:15px;white-space:pre}.search-select[data-v-5e2c043e]{position:absolute;left:0;top:37px;z-index:10}.search-select ul[data-v-5e2c043e]{width:200px;background:#fff;border:1px solid #f1f1f1}.search-select ul li[data-v-5e2c043e]{cursor:pointer}.search-select ul li[data-v-5e2c043e]:hover{background:#f1f1f1}",""])},642:function(t,e,a){var o=a(613);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(481)("49439468",o,!0)},688:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"unionInfoPage"},[a("section",{staticClass:"handle"},[[t._l(t.buttonData,function(e,o){return t.buttonData.length&&"101109"==e.popedomId?a("el-button",{key:o,attrs:{size:"small",type:"primary",loading:t.keyLoading},on:{click:function(a){t.buttonClick(e.buttonLink)}}},[a("i",{staticClass:"iconfont",class:e.iconLink}),t._v(t._s(e.popedomName))]):t._e()}),t._v(" "),t._l(t.buttonData,function(e,o){return t.buttonData.length&&"101110"==e.popedomId?a("el-button",{key:o,attrs:{size:"small",type:"primary",loading:t.codeLoading},on:{click:function(a){t.buttonClick(e.buttonLink)}}},[a("i",{staticClass:"iconfont",class:e.iconLink}),t._v(t._s(e.popedomName))]):t._e()})]],2),t._v(" "),a("section",{staticClass:"search"},[a("div",{staticClass:"searchLeft",style:{height:t.reaHeight}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchData}},[a("el-form-item",{attrs:{label:"终端类型"}},[a("el-select",{attrs:{size:"small"},on:{change:t.getItemNoByTermType},model:{value:t.termType,callback:function(e){t.termType=e},expression:"termType"}},t._l(t.termTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.typeName,value:t.typeCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"终端型号"}},[a("el-select",{attrs:{size:"small"},model:{value:t.itemNo,callback:function(e){t.itemNo=e},expression:"itemNo"}},t._l(t.itemNoList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"终端序列号"}},[a("el-input",{attrs:{size:"small",placeholder:"终端序列号"},model:{value:t.termId,callback:function(e){t.termId=e},expression:"termId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"银联终端标识"}},[a("el-input",{attrs:{size:"small",placeholder:"银联终端标识"},model:{value:t.unionLogo,callback:function(e){t.unionLogo=e},expression:"unionLogo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{size:"small",placeholder:"订单号"},model:{value:t.orderId,callback:function(e){t.orderId=e},expression:"orderId"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"searchRight"},[a("el-button",{attrs:{size:"small",icon:"search",type:"primary"},on:{click:function(e){t.search()}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"circle-close",type:"primary"},on:{click:function(e){t.reset()}}},[t._v("重置")])],1),t._v(" "),a("span",{staticClass:"more",on:{click:t.showMore}},[a("i",{class:t.iconClass})])]),t._v(" "),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:t.tableHeight,border:"",stripe:"",data:t.tableData},on:{"selection-change":t.select}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"发行状态:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.publishStatusName))])]),t._v(" "),a("el-form-item",{attrs:{label:"订单号:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.orderId))])]),t._v(" "),a("el-form-item",{attrs:{label:"终端类型:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termTypeName))])]),t._v(" "),a("el-form-item",{attrs:{label:"终端生成时间:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.createDatetime))])]),t._v(" "),a("el-form-item",{attrs:{label:"终端发行时间:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.publishDatetime))])]),t._v(" "),a("el-form-item",{attrs:{label:"终端编码:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termCode))])]),t._v(" "),a("el-form-item",{attrs:{label:"终端状态:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termStatus))])]),t._v(" "),a("el-form-item",{attrs:{label:"批次号:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.batchNo))])]),t._v(" "),a("el-form-item",{attrs:{label:"银联秘钥导出时间:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.termExportUpdateDatetime))])]),t._v(" "),a("el-form-item",{attrs:{label:"序列号导出批次:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.taskBatchNo))])]),t._v(" "),a("el-form-item",{attrs:{label:"序列号导出状态:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.taskTermIdExportStatus))])]),t._v(" "),a("el-form-item",{attrs:{label:"序列号导出时间:"}},[a("span",{staticClass:"itemValue"},[t._v(t._s(e.row.taskCreateDatetime))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"终端序列号",prop:"termId","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"终端型号",prop:"itemNo","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"银联秘钥导出次数",prop:"termExportNum","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"银联秘钥导出状态",prop:"termExportStatusName","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","show-overflow-tooltip":"",label:"银联终端标识",prop:"unionLogo","min-width":"160"}})],1),t._v(" "),a("pagerows",{attrs:{searchData:t.searchData,url:t.url,reload:t.reload},on:{tableContent:t.tableContent}})],1)},staticRenderFns:[]}}});